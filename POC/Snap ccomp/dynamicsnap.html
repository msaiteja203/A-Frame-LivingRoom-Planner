<!-- <!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>A-Frame Snap Component</title>
<script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
<script src="https://unpkg.com/aframe-snap-controls-extended-component/dist/aframe-snap-controls-extended-component.min.js"></script>
  </head>
  <body>
    <a-scene>
        <a-entity cursor position="0 0 -1" geometry="primitive: ring"  scale="0.05 0.5 0.5"  material="color: black; shader: flat" animation="property: scale; to: 0.001 0.001 0.001; dur: 1000; begin: cursor-fusing; fill: backward; easing: ease-in"></a-entity>
      <a-entity id="box" geometry="primitive: box" material="color: blue" position="1 1 1" snap></a-entity>
      <a-camera position="0 1.6 3"></a-camera>
    </a-scene>
 
    <script>
      // Register the snapping component
      AFRAME.registerComponent('snap', {
        schema: {
          interval: { type: 'number', default: 1 } 
        },
        init: function () {
          this.el.addEventListener('componentchanged', this.snapPosition.bind(this));
        },
        snapPosition: function (evt) {
if (evt.detail.name !== 'position') return;
 
          let position = this.el.getAttribute('position');
          let interval = this.data.interval;
 
          // Snap position to the nearest grid interval
          position.x = Math.round(position.x / interval) * interval;
          position.y = Math.round(position.y / interval) * interval;
          position.z = Math.round(position.z / interval) * interval;
 
          this.el.setAttribute('position', position);
        }
      });
    </script>
  </body>
</html> -->

<!DOCTYPE html>
<html>
  <head>
    <title>Two Cubes Collision Detection</title>
    <script src="https://aframe.io/releases/1.0.0/aframe.min.js"></script>
   
 
    <!-- To work on Events -->
    <script src="https://unpkg.com/aframe-event-set-component@^4.0.0/dist/aframe-event-set-component.min.js"></script>
   
    <!-- If we want to use Physics in our project we need to add this script -->
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-physics-system@v4.0.0/dist/aframe-physics-system.js"></script>
 
     <script src="https://unpkg.com/super-hands@2.0.2/dist/super-hands.min.js"></script>
 
    <script>
      /* AFRAME.registerComponent('collider-check', {
        dependencies: ['position'],
 
        init: function () {
          this.el.addEventListener('collide', this.onCollide.bind(this));
        },
 
        tick: function () {
          var box1 = document.querySelector('#box1');
          var box2 = document.querySelector('#box2');
 
          var box1Position = box1.object3D.position;
          var box2Position = box2.object3D.position;
 
          if (this.isColliding(box1Position, box2Position)) {
            box1.setAttribute('color', 'yellow');
            box2.setAttribute('color', 'yellow');
          } else {
            box1.setAttribute('color', 'blue');
            box2.setAttribute('color', 'red');
          }
        },
 
        isColliding: function (pos1, pos2) {
          var distance = pos1.distanceTo(pos2);
          return distance < 1.1; // Adjust this value based on the size of your cubes
        }
      });
     */

     AFRAME.registerComponent('snap', {
            dependencies: ['position'],
 
            schema: {
                offset: { type: 'vec3' },
                snap: { type: 'vec3' }
            },
 
            init: function () {
                this.originalPos = this.el.getAttribute('position');
            },
 
            update: function () {
                var data = this.data;
 
                var pos = AFRAME.utils.clone(this.originalPos);
                pos.x = Math.floor(pos.x / data.snap.x) * data.snap.x + data.offset.x;
                pos.y = Math.floor(pos.y / data.snap.y) * data.snap.y + data.offset.y;
                pos.z = Math.floor(pos.z / data.snap.z) * data.snap.z + data.offset.z;
 
                this.el.setAttribute('position', pos);
            }
        });

/*   Size increase and decrease  */
    AFRAME.registerComponent("dragobj", {
        init:function (){
          var el = this.el;
          el.addEventListener('click', () => {
            var currentscale = el.getAttribute('scale');
            el.setAttribute('scale' , {
              x:currentscale.x+0.5, y:currentscale.y + 0.5, z:currentscale.z+0.5
            })
          })
        }
      })
 

      /* dynamic rotation */
      AFRAME.registerComponent("objrotate", {
        init:function (){
          var el = this.el;
          el.addEventListener('click', () => {
            var currentRotation = el.getAttribute('position');
            el.setAttribute('position' , {
              x:currentRotation.x+1, y:currentRotation.y + 1, z:currentRotation.z+1
            })
          })
        }
      })
    </script>
  </head>
  <body>
    <a-scene physics="gravity:-9.8" progressive-controls>
      <!-- First cube -->
      <a-box grabbable id="box1" position="-1 0 -3" rotation="0 45 0" color="blue" depth="1" height="1" width="1" dragobj></a-box>
 
      <!-- Second cube -->
      <a-box id="box2" position="2 0 -5" rotation="0 45 45" color="red" depth="1" height="1" width="1" dragobj></a-box>
 

      <a-box grabbable id="box1" position="-1 2 -3" rotation="0 0 0" color="blue" depth="1" height="1" width="1" objrotate></a-box>
 
      <!-- Second cube -->
      <a-box id="box2" position="2 2 -5" rotation="0 0 0" color="red" depth="1" height="1" width="1" objrotate></a-box>
      <!-- Camera and controls -->
      <a-entity camera look-controls wasd-controls> 
        <a-cursor></a-cursor>
      </a-entity>
    </a-scene>
  </body>
</html>