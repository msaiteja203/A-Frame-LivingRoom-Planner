<html>
    <head>
        <title>POC-1</title>
        <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
          <!-- To work on Events -->
          <script src="https://unpkg.com/aframe-event-set-component@^4.0.0/dist/aframe-event-set-component.min.js"></script>
          <!-- If we want to use Physics in our project we need to add this script -->
          <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v3.13.1/dist/aframe-extras.min.js"></script>
          <!-- To more interact with the objects in our seen -->
          <script src="https://unpkg.com/super-hands@2.1.0/dist/super-hands.min.js"></script>
          <!-- <script src="./POC_One.js"></script> -->

          <script>
            AFRAME.registerComponent("textgenerator", {
    init:function(){
        let box=this.el
        let clickCount = 0; 
        // Initialize click count to 0

        box.addEventListener('click', function(){
            clickCount++;
            console.log("Box Clicked");

            // Get reference to the scene element
            let scene = document.querySelector('#scene');
            console.log(scene);

            // check if the click count is 2
            if(clickCount === 2){
                // Get all text elements in the scene
                let texts = document.querySelectorAll('a-text');
              
                // Loop through each text element
                texts.forEach(function(text){
                    // check if the text element is positioned above the clicked entity
                    if(text.getAttribute('position').x===box.getAttribute('position').x &&
                    text.getAttribute('position').y === box.getAttribute('position').y + 1 &&
                    text.getAttribute('position').z === box.getAttribute('position').z){

                        // Remove the text element from the scene
                        scene.removeChild(text);
                    }
                });

                clickCount = 0;

            }else{
                // Create a new <a-text> element
                let newText = document.createElement('a-text');

                // Set the text content of the <a-text> element
                newText.setAttribute('value', "Hello, world!");
                newText.setAttribute('color', 'red');

                let entityPosition = box.getAttribute('position');

                // let boxPosition = box.getAttribute('position');
                let textPosition = {
                    x: entityPosition.x,
                    y: entityPosition.y + 1,
                    // adjust the Y-coordinate to position the text above the box
                    z: entityPosition.z
                };
                // Set the position attribute of the text element
                newText.setAttribute('position', textPosition);

                // Append the text element to the scene
                scene.appendChild(newText);
            }
        });
    }
}); 
          </script>

        <!-- <script>
                AFRAME.registerComponent('display-text', {
                        init: function(){
                                var boxId = this.el.id;
                                var dialogueBox = document.getElementById('dialogue-box');
                                var text = dialogueBox.querySelector('a-text');
                                this.el.addEventListener('click', function (){
                                        text.setAttribute('value', 'Text for Box' + boxId);
                                        dialogueBox.setAttribute('position', this.getAttribute('position'));
                                        dialogueBox.setAttribute('visible', 'true');
                                });
                        }
                });

                document.addEventListener('DOMContentLoader', function(){
                        var scene = document.querySelector('a-scene');
                        console.log("Scene-elements: ", scene)
                        for(var i=0; i<5; i++){
                                for(var j=0; j<10; j++){
                                        var id = 'box-' + (i* 10 +j);
                                        var position = (i -2.5) + '1.5' + (j-5);
                                        var box = document.createElement('a-box');
                                        box.setAttribute('id', id);
                                        box.setAttribute('position', position);
                                        box.setAttribute('color', 'red');
                                        box.setAttribute('depth', '1');
                                        box.setAttribute('height', '1');
                                        box.setAttribute('width', '1');
                                        box.setAttribute('display-text', '');
                                        scene.appendChild(box);
                                }
                        }
                });
        </script> -->
        
    </head>
    <body>
        <a-scene id="scene" physics="gravity:-9.8; restitution: 0.3" progressive-controls>
                <!-- Restitution means: bouncie ness of an objects -->
            <!-- Assets Management System -->
            <a-assets>
                <img id="sky" src="https://th.bing.com/th?id=OIP.0bSfxao4QC_wljlGDmhRTQHaE8&w=306&h=204&c=8&rs=1&qlt=90&o=6&dpr=1.5&pid=3.1&rm=2"/>
                <img id="ground" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRjxIgSzrC4RQ_TBBJQ6Nd9i-s_O5ENprSmMm_wHbpeBHhSXMcZLqPB6JiyknA0MqMOq78&usqp=CAU"/>
            </a-assets>

         

            <!-- Ground -->
            <a-plane id="content" src="#ground" repeat="7 7"scale="20 20 1" rotation="-90 0 0" position="0 -3 -8" static-body></a-plane>

            <!-- Camera -->
            <a-camera position="0 0 1" >
                <a-entity cursor="fuse: true; fuseTimeout: 1000" position="0 0 -1.5"
                                 geometry="primitive: ring"
                                 scale="0.015 0.015 0.015" 
                                 material="color: blue; opacity: 0.5; shader: flat">
                    <a-animation attribute="scale"
                                 to="0.001 0.001 0.001"
                                 dur="1000"
                                 begin="cursor-fusing"
                                 fill="backwards"
                                 easing="ease-in">
                   </animation>
                </a-entity>
            </a-camera>

            <!-- Sky -->
            <a-sky src="#sky"></a-sky>


            <!-- Text -->
            <!-- <a-entity id="dialogue-box" geometry="primitive: plane; width: 1.6; height:0.3" 
                                      material="color: white"
                                      position="-4 6 -5.3"
                                      visible="false">
                <a-text value="Hi this is a box"  color="black" scale="1 1 0.5" position="-0.65 -0.07 0.1">
                </a-text>
            </a-entity> -->
                <!-- First Line -->
                <!-- When ever user clicks on this box text will display  -->
                <a-box textgenerator id="object" color="green" position="-4 5 -5" scale="0.5 0.5 0.5"
                    event-set__click="_event: click; _target: #dialogue-box; visible: true"
                    event-set__enter="_event: mouseenter; material.color: #4F4"
                    event-set__leave="_event: mouseleave; material.color: green"
                    event-set__rescol="_event: click; material.color: #48F"></a-box>
                <!-- if we click on this box the  id:posbox changes its position, if we click on the posbox then it will return to its initial position-->
                    <a-box textgenerator color="green" position="-2 5 -5" scale="0.5 0.5 0.5"
                    event-set__enter="_event: mouseenter; material.color: blue"
                    event-set__leave="_event:mouseleave; material.color:green"
                    event-set__rescol="_event:click;material.color:purple"
                    event-set__tarpos="_event:click; _target:#posbox; position:-2 7 -5">
                </a-box>
                <a-box textgenerator id="posbox" color="gray" position="-6 7 -7" scale="0.5 0.5 0.5"
                       event-set__enter="_event: mouseenter; material.color: blue"
                       event-set__leave="_event:mouseleave; material.color:#0c8a90" event-set__rescol="_event:click;_target:#txt"
                       event-set__respos="_event:click; position:-6 7 -7">
                </a-box>

                <a-box textgenerator color="green" position="0 5 -5" scale="0.5 0.5 0.5"
                    event-set__enter="_event: mouseenter; material.color: #4F4"
                    event-set__leave="_event: mouseleave; material.color: green"
                    event-set__rescol="_event: click; material.color: #48F"></a-box>
            <a-box textgenerator color="green" position="2 5 -5" scale="0.5 0.5 0.5"
                    event-set__enter="_event: mouseenter; material.color: #4F4"
                    event-set__leave="_event: mouseleave; material.color: green"
                    event-set__rescol="_event: click; material.color: #48F"></a-box>
            <a-box textgenerator color="#333333" position="4 5 -5" scale="0.5 0.5 0.5"
                    event-set__enter="_event: mouseenter; material.color: #4F4"
                    event-set__leave="_event: mouseleave; material.color: green"
                    event-set__rescol="_event: click; material.color: #48F">
                <a-animation attribute="position" 
                    from="4 5 -5" 
                    to="4 -1 -5" 
                    direction="alternate"
                    repeat="4"
                    duration="6000"
                    easing="linear">
                </a-animation>
            </a-box>
            
            

            <!-- Second line -->
            <a-box textgenerator color="green" position="-4 3 -5" scale="0.5 0.5 0.5"
                    event-set__enter="_event: mouseenter; material.color: #4F4"
                    event-set__leave="_event: mouseleave; material.color: green"
                    event-set__rescol="_event: click; material.color: #48F"></a-box>
                    <!--Animation:  Rotation in y-direction -->
            <a-box textgenerator color="green" position="-2 3 -5" scale="0.5 0.5 0.5"
                    event-set__enter="_event: mouseenter; material.color: #4F4"
                    event-set__leave="_event: mouseleave; material.color: green"
                    event-set__rescol="_event: click; material.color: #48F">
                <a-animation attribute="rotation" to="0 360 0" repeat="indefinite" dur="5000" easing="linear">
                </a-animation>
            </a-box>
           <a-box textgenerator color="green" position="0 3 -5" scale="0.5 0.5 0.5"
                    event-set__enter="_event: mouseenter; material.color: #4F4"
                    event-set__leave="_event: mouseleave; material.color: green"
                    event-set__rescol="_event: click; material.color: #48F" static-body>
           </a-box>
           <!--Animation:  Rotation in x-direction -->
            <a-box textgenerator color="green" position="2 3 -5" scale="0.5 0.5 0.5"
                    event-set__enter="_event: mouseenter; material.color: #4F4"
                    event-set__leave="_event: mouseleave; material.color: green"
                    event-set__rescol="_event: click; material.color: #48F" >
                    <a-animation attribute="rotation" to=" 360 0 0" repeat="indefinite" dur="5000" easing="linear">
                </a-box>
            <a-box textgenerator color="green" position="4 3 -5" scale="0.5 0.5 0.5"
                    event-set__enter="_event: mouseenter; material.color: #4F4"
                    event-set__leave="_event: mouseleave; material.color: green"
                    event-set__rescol="_event: click; material.color: #48F"></a-box>
           
            

            <!-- third line -->
                <a-box  color="green" position="-4 1 -5" scale="0.5 0.5 0.5"
                    event-set__enter="_event: mouseenter; material.color: #4F4"
                    event-set__leave="_event: mouseleave; material.color: green"
                    event-set__rescol="_event: click; material.color: #48F">
                </a-box>
                    <!-- Animation: SCALING  -->
                <a-box  color="green" position="-2 1 -5" scale="0.5 0.5 0.5"
                    event-set__enter="_event: mouseenter; material.color: #4F4"
                    event-set__leave="_event: mouseleave; material.color: green"
                    event-set__rescol="_event: click; material.color: #48F">
                    <a-animation attribute="scale" from="0.5 0.5 0.5" to="0.5 0.9 0.5" repeat="indefinite" easing="linear">
                    </a-animation>
                </a-box>
                <!-- Animation: POSITION Changing from: 3rdline-3rd to:4thline 4th -->
                <a-box id="three-three" color="green" position="0 1 -5" scale="0.5 0.5 0.5"
                    event-set__enter="_event: mouseenter; material.color: #4F4"
                    event-set__leave="_event: mouseleave; material.color: green"
                    event-set__rescol="_event: click; material.color: #48F" dynamic-body="linearDamping: 0.5" grabbable>
                    <!-- LinearDamping: to control an object a resistance to movement -->
                </a-box>
                <a-box id="three-four" color="green" position="2 1 -5" scale="0.5 0.5 0.5"
                    event-set__enter="_event: mouseenter; material.color: #4F4"
                   event-set__leave="_event: mouseleave; material.color: green"
                   event-set__rescol="_event: click; material.color: #48F" dynamic-body="linearDamping=0.05; angularDam" grababble>   
                </a-box>
                <a-box  color="green" position="4 1 -5" scale="0.5 0.5 0.5"
                    event-set__enter="_event: mouseenter; material.color: #4F4"
                    event-set__leave="_event: mouseleave; material.color: green"
                    event-set__rescol="_event: click; material.color: #48F">
                </a-box>
            

            <!-- fourth line -->
                <a-box  color="green" position="-4 -1 -5" scale="0.5 0.5 0.5"
                    event-set__enter="_event: mouseenter; material.color: #4F4"
                    event-set__leave="_event: mouseleave; material.color: green"
                    event-set__rescol="_event: click; material.color: #48F">
                </a-box>

                <!-- revolving the child box wrt to its parent -->
                <!-- parent -->
            <a-box color="green" position="-2 -1 -5" scale="0.5 0.5 0.5" event-set__enter="_event: mouseenter; material.color: #4F4"
                    event-set__leave="_event: mouseleave; material.color: green"
                    event-set__tarcol="_event: click; _target: #green; material.color: #48F"
                    event-set__rescol="_event:click;material.color:#48F">
              <a-animation attribute="rotation" to="0 360 0" repeat="indefinite" dur="5000" easing="linear"></a-animation>
                <!-- child -->
                <a-box id="green" color="green" position="1 2 -2"
                event-set__rescol="_event: click; material.color: #48F">
                </a-box>
 
           </a-box>

                <a-box  color="green" position="0 -1 -5" scale="0.5 0.5 0.5"
                    event-set__enter="_event: mouseenter; material.color: #4F4"
                    event-set__leave="_event: mouseleave; material.color: green"
                    event-set__rescol="_event: click; material.color: #48F">
                    <a-animation attribute="rotation" to="0 360 0" repeat="indefinite" dur="5000" easing="linear"></a-animation>
                </a-box>
                <a-box  color="green" position="2 -1 -5" scale="0.5 0.5 0.5"
                    event-set__enter="_event: mouseenter; material.color: #4F4"
                    event-set__leave="_event: mouseleave; material.color: green"
                    event-set__rescol="_event: click; material.color: #48F">
                </a-box>
                <a-box  color="green" position="4 -1 -5" scale="0.5 0.5 0.5"
                    event-set__enter="_event: mouseenter; material.color: #4F4"
                    event-set__leave="_event: mouseleave; material.color: green"
                    event-set__rescol="_event: click; material.color: #48F">
                        <a-animation attribute="position" 
                             from="4 -1 -5" 
                             to="4 5 -5" 
                             repeat="4"
                            direction="alternate"
                            duration="6000"
                            easing="linear" >
                        </a-animation>
           
                </a-box>

                    

        </a-scene>
    </body>
</html>